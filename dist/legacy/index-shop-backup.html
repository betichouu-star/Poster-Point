<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <title>Poster Point ‚Äî Anime Posters Shop</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="assets/logo-48.png">
  <link rel="apple-touch-icon" href="assets/apple-touch-180.png">
</head>
<body>

  <header>
    <div class="logo">
  <img src="assets/logo-48.png" srcset="assets/logo-96.png 2x" alt="Poster Point logo" class="site-logo" style="width:48px;height:48px;display:block">
      <div>
        <div class="title blinking-text">Poster Point</div>
        <div class="subtitle">Anime posters ‚Ä¢ stickers ‚Ä¢ bookmarks</div>
      </div>
    </div>
    <!-- Hamburger for small screens -->
    <button id="hamburger-btn" class="hamburger-btn" aria-label="Toggle categories" title="Toggle categories">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 7h18M3 12h18M3 17h18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </button>
    <button id="shop-type-btn" aria-label="Toggle shop type" title="Toggle shop type" style="background:transparent;border:none;padding:8px;cursor:pointer;font-size:18px">üõçÔ∏è</button>
    <div style="flex:1"></div>
  <div class="nav-actions" style="display:flex;gap:12px;align-items:center">
    <button id="theme-toggle" aria-label="Toggle theme" title="Toggle theme" style="background:transparent;border:none;padding:8px;cursor:pointer;font-size:18px">üåô</button>
    <!-- cart button: opens cart sidebar -->
    <button id="nav-cart-btn" aria-label="Open cart" style="padding:8px 10px; display:flex; align-items:center; gap:8px; background:white; border:1px solid #ccc; border-radius:8px; cursor:pointer; color:#333; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false"><path d="M3 3h2l.4 2M7 13h10l3-8H6.4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" /></svg>
        <span id="nav-cart-count" style="font-weight:700">0 items</span>
      </button>
    </div>
  </header>
  <!-- layout: sidebar + main -->
  <div class="layout">

  <!-- Overlay used when sidebar is open on narrow screens -->
  <div id="sidebar-overlay" class="sidebar-overlay" aria-hidden="true"></div>

    <main class="main-content">
      <div class="toolbar">
        <div class="search">
          <input id="search-input" placeholder="Search posters, bookmarks, stickers..." />
        </div>
  <div id="offer-banner" style="margin-left:12px; padding:8px 12px; background:linear-gradient(90deg,#fff,#f8f8f8); border-radius:8px; font-weight:700; color:#2b7a2b; font-size:13px; display:flex; align-items:center">Buy 3 Get 1 Free ‚Ä¢ Buy 5 Get 2 Free ‚Ä¢ Buy 10 Get 5 Free</div>
        <div class="summary" id="toolbar-summary">Click a category to filter</div>
      </div>

  <p style="color:var(--muted); margin-top:6px; margin-bottom:18px">Click <strong>Buy now</strong> to collect items. Use the cart at bottom-right to checkout.</p>

      <section class="grid" id="product-grid">
        <!-- product cards generated by JS -->
      </section>
    </main>
  </div>

  <!-- Cart -->
  <aside class="cart" id="cart" aria-live="polite">
    <div class="cart-header">
      <div style="display:flex;gap:10px;align-items:center">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="opacity:0.9"><path d="M3 3h2l.4 2M7 13h10l3-8H6.4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" /></svg>
        <div style="font-weight:800">Cart</div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <div id="cart-count" style="color:var(--muted); font-weight:700">0 items</div>
        <button id="cart-close-btn" aria-label="Close cart" style="background:transparent;border:none;color:var(--muted);font-size:18px;cursor:pointer">‚úï</button>
      </div>
    </div>
    <div class="cart-body" id="cart-body">
      <div class="empty" id="cart-empty">Your cart is empty ‚Äî add some posters!</div>
    </div>
    <div class="cart-footer">
      <div>
        <div style="color:var(--muted); font-size:13px">Total</div>
        <div class="total" id="cart-total">‚Çπ0</div>
        <div id="cart-offer-msg" style="color:var(--muted); font-size:12px; margin-top:6px"></div>
      </div>
      <div style="display:flex;flex-direction:column; gap:8px; align-items:flex-end">
        <div style="display:flex;flex-direction:column; gap:8px; align-items:flex-end">
          <button id="send-whatsapp" style="background:#25D366;border:none;padding:8px 12px;border-radius:8px;color:white;font-weight:800;cursor:pointer">Send via WhatsApp</button>
          <button style="background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--muted);font-weight:700;cursor:pointer" id="clear-cart">Clear</button>
        </div>
      </div>
    </div>
  </aside>

  <!-- Categories Panel (Minimizable) -->
  <aside class="categories-panel" id="categories-panel" aria-live="polite">
    <div class="categories-header">
      <div style="font-weight:800">Categories</div>
      <button id="categories-close-btn" aria-label="Close categories" style="background:transparent;border:none;color:var(--muted);font-size:18px;cursor:pointer">‚úï</button>
    </div>
    <div class="categories-body" id="categories-body">
      <ul id="subcats" class="subcat-list">
        <!-- subcategories injected from images-manifest.js when Posters selected -->
      </ul>
    </div>
  </aside>

  <!-- Shop Type Panel (Minimizable) -->
  <aside class="shop-type-panel" id="shop-type-panel" aria-live="polite">
    <div class="shop-type-header">
      <div style="font-weight:800">Shop by type</div>
      <button id="shop-type-close-btn" aria-label="Close shop type" style="background:transparent;border:none;color:var(--muted);font-size:18px;cursor:pointer">‚úï</button>
    </div>
    <div class="shop-type-body" id="shop-type-body">
      <ul id="type-list" class="type-list">
        <!-- types injected by JS: Posters, Bookmarks, Stickers -->
      </ul>
    </div>
  </aside>

  <!-- Load manifest and application code -->
  <!-- Static manifest (fallback when no PHP/server). Generated from filesystem. -->
  <script src="js/manifest.static.js"></script>
  <!-- Convert PRODUCTS manifest to imageCatalog format for app.js -->
  <script src="js/products-to-catalog.js"></script>
  <script src="js/manifest.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/app.js"></script>
  <script>
    // Categories Panel Toggle
    document.addEventListener('DOMContentLoaded', function() {
      const hamburgerBtn = document.getElementById('hamburger-btn');
      const categoriesPanel = document.getElementById('categories-panel');
      const categoriesCloseBtn = document.getElementById('categories-close-btn');
      
      const shopTypeBtn = document.getElementById('shop-type-btn');
      const shopTypePanel = document.getElementById('shop-type-panel');
      const shopTypeCloseBtn = document.getElementById('shop-type-close-btn');

      // Categories Panel
      if (hamburgerBtn) {
        hamburgerBtn.addEventListener('click', () => {
          const isOpen = categoriesPanel.classList.contains('open');
          if (isOpen) {
            categoriesPanel.classList.remove('open');
          } else {
            categoriesPanel.classList.add('open');
            shopTypePanel.classList.remove('open');
          }
        });
      }

      if (categoriesCloseBtn) {
        categoriesCloseBtn.addEventListener('click', () => {
          categoriesPanel.classList.remove('open');
        });
      }

      // Shop Type Panel
      if (shopTypeBtn) {
        shopTypeBtn.addEventListener('click', () => {
          const isOpen = shopTypePanel.classList.contains('open');
          if (isOpen) {
            shopTypePanel.classList.remove('open');
          } else {
            shopTypePanel.classList.add('open');
            categoriesPanel.classList.remove('open');
          }
        });
      }

      if (shopTypeCloseBtn) {
        shopTypeCloseBtn.addEventListener('click', () => {
          shopTypePanel.classList.remove('open');
        });
      }
    });
  </script>
  <script>
    // Page Transition Animation
    (function(){
      // Add fade-in to page load
      document.body.style.opacity = '0';
      document.body.style.transition = 'opacity 0.4s ease-in-out';
      
      setTimeout(() => {
        document.body.style.opacity = '1';
      }, 10);
      
      // Add fade-out on link click
      document.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', (e) => {
          if(!link.target && link.href && link.href.includes('.html')){
            e.preventDefault();
            document.body.style.opacity = '0';
            setTimeout(() => {
              window.location.href = link.href;
            }, 250);
          }
        });
      });
    })();
  </script>
  <script>
    // Force immediate initialization
    window.addEventListener('load', () => {
      if (window.initializePosters && window.initializeStickers) {
        initializePosters();
        initializeStickers();
        initSidebar();
        renderProducts();
        updateUI();
      } else {
        console.error('Application initialization failed - required functions not found');
      }
    });
  </script>
  <script>
    // Revert to original category behavior
    document.addEventListener('DOMContentLoaded', function() {
      const categoriesPanel = document.getElementById('categories-panel');
      const subcategories = document.querySelectorAll('#subcats li');

      subcategories.forEach(subcat => {
        subcat.addEventListener('click', () => {
          // Reset and hide the categories panel
          categoriesPanel.classList.remove('open');

          // Display the clicked category
          const clickedCategory = subcat.textContent;
          const toolbarSummary = document.getElementById('toolbar-summary');
          toolbarSummary.textContent = `Selected Category: ${clickedCategory}`;
        });
      });
    });
  </script>
</body>
</html>